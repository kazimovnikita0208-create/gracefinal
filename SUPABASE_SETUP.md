# Настройка Supabase для приложения Grace

## 1. Создание проекта в Supabase

1. Перейдите на [supabase.com](https://supabase.com)
2. Создайте новый проект
3. Выберите регион (рекомендуется ближайший к вашим пользователям)
4. Дождитесь создания проекта

## 2. Получение DATABASE_URL

1. В панели Supabase перейдите в Settings → Database
2. Найдите строку подключения в разделе "Connection string"
3. Скопируйте URL (он выглядит как: `postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres`)

## 3. Настройка переменных окружения

### Для локальной разработки:
Создайте файл `.env.local` в корне проекта:
```
DATABASE_URL="postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres"
```

### Для Vercel:
1. Перейдите в настройки проекта на Vercel
2. Добавьте переменную окружения:
   - Name: `DATABASE_URL`
   - Value: `postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres`

## 4. Настройка базы данных

### Генерация Prisma клиента:
```bash
npx prisma generate
```

### Применение схемы к базе данных:
```bash
npx prisma db push
```

### Заполнение тестовыми данными:
```bash
npx prisma db seed
```

## 5. Структура базы данных

Приложение использует следующие таблицы:
- `User` - пользователи (клиенты)
- `Master` - мастера салона
- `Service` - услуги салона
- `Appointment` - записи клиентов
- `MasterSchedule` - расписание мастеров
- `MasterService` - связь мастеров и услуг
- `Review` - отзывы клиентов
- `Admin` - администраторы
- `Notification` - уведомления

## 6. Проверка подключения

После настройки переменных окружения:
1. Запустите `npm run dev`
2. Откройте приложение в браузере
3. Проверьте консоль - должны появиться сообщения о подключении к базе данных

## 7. Fallback на mock данные

Если `DATABASE_URL` не настроен, приложение автоматически переключится на mock данные для демонстрации функциональности.

## 8. Безопасность

- Никогда не коммитьте `.env.local` в git
- Используйте разные базы данных для разработки и продакшена
- Регулярно обновляйте пароли доступа к базе данных

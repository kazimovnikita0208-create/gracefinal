# Настройка Vercel для работы с Supabase

## 1. Создание проекта в Supabase

### Шаг 1: Регистрация в Supabase
1. Перейдите на https://supabase.com
2. Нажмите "Start your project"
3. Войдите через GitHub (рекомендуется) или создайте аккаунт
4. Нажмите "New Project"

### Шаг 2: Создание проекта
1. **Organization**: Выберите вашу организацию или создайте новую
2. **Project Name**: `grace-salon-db`
3. **Database Password**: Создайте надежный пароль (сохраните его!)
4. **Region**: Выберите ближайший регион (например, Europe West)
5. Нажмите "Create new project"

### Шаг 3: Получение DATABASE_URL
1. Дождитесь создания проекта (2-3 минуты)
2. Перейдите в **Settings** → **Database**
3. Найдите секцию **Connection string**
4. Скопируйте **URI** (она выглядит как `postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres`)
5. Замените `[password]` на ваш пароль

## 2. Настройка переменных окружения в Vercel

### Шаг 1: Открытие настроек проекта
1. Перейдите на https://vercel.com/dashboard
2. Найдите ваш проект `gracefinal`
3. Нажмите на проект
4. Перейдите в **Settings** → **Environment Variables**

### Шаг 2: Добавление DATABASE_URL
1. Нажмите **Add New**
2. Заполните поля:
   - **Name**: `DATABASE_URL`
   - **Value**: вставьте скопированную строку подключения из Supabase
   - **Environment**: выберите **Production**, **Preview**, **Development**
3. Нажмите **Save**

### Шаг 3: Перезапуск деплоя
1. Перейдите в **Deployments**
2. Нажмите **Redeploy** на последнем деплое
3. Дождитесь завершения (2-3 минуты)

## 3. Инициализация базы данных

После настройки DATABASE_URL, Vercel автоматически:
1. Сгенерирует Prisma Client
2. Применит схему к базе данных
3. Заполнит базу тестовыми данными

### Проверка в Supabase
1. Откройте ваш проект в Supabase
2. Перейдите в **Table Editor**
3. Вы должны увидеть созданные таблицы: `User`, `Master`, `Service`, `Appointment` и др.

## 4. Структура данных

После инициализации в базе будут:
- **3 мастера**: Анна Иванова (маникюр), Мария Петрова (педикюр), Елена Смирнова (брови)
- **4 услуги**: Маникюр (1500₽), Педикюр (2000₽), Коррекция бровей (800₽), Окрашивание бровей (1200₽)
- **Расписание**: Пн-Пт 9:00-18:00, Сб 10:00-16:00
- **Тестовый пользователь** и **админ**
- **Тестовая запись**

## 5. Проверка работы

### API Endpoints
- https://gracefinal.vercel.app/api/health - статус API
- https://gracefinal.vercel.app/api/masters - список мастеров
- https://gracefinal.vercel.app/api/services - список услуг
- https://gracefinal.vercel.app/api/appointments - записи пользователя

### Основное приложение
- https://gracefinal.vercel.app - главная страница
- https://gracefinal.vercel.app/booking - запись к мастеру
- https://gracefinal.vercel.app/admin - админ панель

## 6. Преимущества Supabase

✅ **Бесплатный план**: 500MB базы данных, 2GB трафика в месяц
✅ **Автоматические бэкапы**: Ежедневные снимки базы данных
✅ **Веб-интерфейс**: Удобное управление данными через веб-панель
✅ **Real-time**: Возможность добавления real-time функций в будущем
✅ **Auth**: Встроенная аутентификация (можно использовать позже)
✅ **Storage**: Файловое хранилище для фотографий мастеров
